# java-learning
java学习，学习java新版本知识点
#锁
## 锁的状态
````
1、无锁状态
2、偏向锁
3、轻量级锁
4、重量锁
````
> 随锁的竞争，锁可以升级，但不可降级
#### 非公平锁
> 加锁前不会检查是否有排第等待的线程，直接获取锁，获取不到的自动到对位排队
- jvm按照随机的、就近原则分配锁的机制成为非公平锁，ReentrantLock在构造器函数提供是否为公平锁机制，默认是
非公平。非公平锁的执行效率高于公平锁，因公平锁需要在多核时维护一个队列
- -  ReentrantLock通过lock和unlock进行加锁及解锁，且加锁后需要手动的解锁，为避免程序出现异常无法解锁情况的发生，
必须使用finally控制块进行操作，synchronized会被jvm自动解锁。
- - 重入锁相比较于synchronized的优势就是可中断、公平锁、多个锁。且可唤醒指定条件的线程，object的是随机的
#### 公平锁
> 加锁前会检查是否有排第等待的线程，优先排队等待的线程
- 公平锁的机制是公平的，通常先对锁提出获取请求的线程先被分配到锁。
#### 可重入锁
> 也叫递归锁，ReentrantLock和synchronized在java环境下都是重入锁。
- 同一线程，外层获取锁后，内层递归函数仍然有获取该锁的代码。但不受影响。
#### 读写锁
> java提供，在读的地方使用锁，在写的地方使用锁，如果没有写锁，读是无阻塞的，在一定情况下提高程序执行效率，多个读锁不互斥，
读锁与写锁互斥，由jvm控制。


